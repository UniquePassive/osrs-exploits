package com.uniquepassive.osrsexploits;

import com.uniquepassive.osrsexploits.util.JarUtil;
import org.objectweb.asm.tree.ClassNode;

import java.io.IOException;
import java.util.Map;
import java.util.jar.JarFile;

/**
 * Finds fields that haven't been renamed by checking that field name length exceeds 2.
 *
 * Only "val$preferOwnWorld" is outputted at the time of writing this.
 */
public class GamepackNonRenamedMemberFinder {

    public static void main(String[] args) throws IOException {
        if (args.length >= 1) {
            JarFile file = new JarFile(args[0]);

            Map<String, ClassNode> classes = JarUtil.readJar(file, false);

            classes.values().forEach(c -> {
                c.fields.forEach(m -> {
                    if (m.name.length() > 2) {
                        System.out.println("Non-renamed field: " + c.name + "." + m.name);
                    }
                });
            });
        } else {
            System.out.println("Example arguments: \"gamepack_127.jar\"");
        }
    }
}
