package com.uniquepassive.osrsexploits;

import java.io.IOException;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/**
 * Outputs info about the files in a passed in gamepack JAR file.
 *
 * At the time of writing this, the majority of the classes are modified at the same second,
 * but the rest are modified 2 seconds after. The META-INF files are modified another 4 seconds after that.
 */
public class GamepackFileInfo {

    public static void main(String[] args) throws IOException {
        if (args.length >= 1) {
            JarFile file = new JarFile(args[0]);

            Enumeration<JarEntry> entries = file.entries();

            while (entries.hasMoreElements()) {
                JarEntry entry = entries.nextElement();

                String fileInfo = "Name: " + entry.getName();

                if (entry.getLastModifiedTime() != null) {
                    fileInfo += ", Last Modified Time: " + entry.getLastModifiedTime();
                }

                if (entry.getAttributes() != null) {
                   fileInfo += ", Attributes: " + entry.getAttributes().entrySet();
                }

                System.out.println(fileInfo);
            }
        } else {
            System.out.println("Example arguments: \"gamepack_127.jar\"");
        }
    }
}
